<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Clasificador de Incidentes â€“ Cyberbotillo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  font-family: Arial, sans-serif;
  background:#f3f7ff;
  margin:0;
  padding:20px;
  display:flex;
  justify-content:center;
}
.contenedor{
  max-width:900px;
  background:white;
  padding:20px;
  border-radius:16px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
}
h1{
  color:#2563eb;
  text-align:center;
}
.subtitulo{
  text-align:center;
  margin-bottom:20px;
}
.avatar{
  text-align:center;
  margin-bottom:20px;
}
.avatar img{
  max-width:280px;
  width:90%;
  border-radius:14px;
}
.boton{
  background:#2563eb;
  color:white;
  border:none;
  border-radius:999px;
  padding:12px 20px;
  font-size:1rem;
  cursor:pointer;
  margin:8px;
}
.boton.verde{
  background:#16a34a;
}
.incidente{
  background:#dbeafe;
  padding:15px;
  border-radius:12px;
  margin:20px 0;
}
.opciones{
  display:flex;
  flex-wrap:wrap;
  gap:10px;
  margin-bottom:15px;
}
.opciones button{
  flex:1;
  min-width:120px;
  border:2px solid #cbd5f5;
  border-radius:999px;
  padding:10px;
  cursor:pointer;
  background:white;
}
.opciones button.activo{
  background:#2563eb;
  color:white;
}
.feedback{
  font-weight:bold;
  margin-top:10px;
}
.correcto{ color:#16a34a; }
.incorrecto{ color:#dc2626; }
.pista{
  background:#fef3c7;
  padding:10px;
  border-radius:10px;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="contenedor">

  <!-- TÃTULO -->
  <h1>Clasificador de Incidentes de Cyberbotillo</h1>
  <p class="subtitulo">
    Aprende a clasificar incidentes por <b>origen</b>, <b>tipo</b> e <b>intencionalidad</b>.
  </p>

  <!-- AVATAR + AUDIO REAL -->
  <div class="avatar">
    <img src="ciberbotillo.png" alt="Cyberbotillo, avatar robÃ³tico asistente">
    <br>
    <button class="boton" onclick="document.getElementById('audioBienvenida').play()">
      ðŸ”Š Escuchar bienvenida
    </button>
    <audio id="audioBienvenida" src="Cyberbotillo.mp3"></audio>
  </div>

  <!-- INCIDENTE -->
  <div class="incidente">
    <b>ðŸ§© Incidente:</b>
    <p id="textoIncidente">Cargando incidente...</p>
    <button class="boton verde" onclick="hablar(textoIncidente.innerText)">
      ðŸ”Š Escuchar incidente
    </button>
  </div>

  <!-- ORIGEN -->
  <p><b>1. Origen</b></p>
  <div class="opciones" data-grupo="origen">
    <button onclick="seleccionar(this,'origen','interno')">Interno</button>
    <button onclick="seleccionar(this,'origen','externo')">Externo</button>
  </div>

  <!-- TIPO -->
  <p><b>2. Tipo</b></p>
  <div class="opciones" data-grupo="tipo">
    <button onclick="seleccionar(this,'tipo','humano')">Humano</button>
    <button onclick="seleccionar(this,'tipo','tecnologico')">TecnolÃ³gico</button>
  </div>

  <!-- INTENCIONALIDAD -->
  <p><b>3. Intencionalidad</b></p>
  <div class="opciones" data-grupo="intencionalidad">
    <button onclick="seleccionar(this,'intencionalidad','accidental')">Accidental</button>
    <button onclick="seleccionar(this,'intencionalidad','deliberado')">Deliberado</button>
  </div>

  <!-- BOTONES -->
  <button class="boton" onclick="comprobar()">âœ… Comprobar</button>
  <button class="boton" onclick="mostrarPista()">ðŸ’¡ Ver pista</button>
  <button class="boton" onclick="nuevoIncidente()">ðŸ”„ Nuevo incidente</button>

  <!-- FEEDBACK -->
  <div id="feedback" class="feedback"></div>
  <div id="pista" class="pista" style="display:none;"></div>

</div>

<script>
let vozActiva=true;
function hablar(texto){
  if(!vozActiva || !window.speechSynthesis) return;
  const u=new SpeechSynthesisUtterance(texto);
  u.lang="es-ES";
  u.rate=0.9;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

const incidentes=[
 {texto:"Un estudiante descarga sin saberlo un archivo infectado desde una pÃ¡gina web.",
  origen:"externo", tipo:"tecnologico", intencionalidad:"accidental",
  pista:"El problema viene de fuera y lo causa un programa."},

 {texto:"Un tÃ©cnico desconecta por error el cable del servidor.",
  origen:"interno", tipo:"humano", intencionalidad:"accidental",
  pista:"Ocurre dentro y lo hace una persona sin intenciÃ³n."},

 {texto:"Alguien envÃ­a correos falsos para robar contraseÃ±as.",
  origen:"externo", tipo:"humano", intencionalidad:"deliberado",
  pista:"La persona actÃºa a propÃ³sito desde fuera."}
];

let actual;
let seleccionActual={};

const textoIncidente=document.getElementById("textoIncidente");

function nuevoIncidente(){
  actual=incidentes[Math.floor(Math.random()*incidentes.length)];
  textoIncidente.innerText=actual.texto;
  seleccionActual={};
  document.getElementById("feedback").innerText="";
  document.getElementById("pista").style.display="none";
  hablar(actual.texto);
  document.querySelectorAll(".opciones button").forEach(b=>b.classList.remove("activo"));
}

function seleccionar(btn,grupo,valor){
  document.querySelectorAll(`.opciones[data-grupo="${grupo}"] button`)
    .forEach(b=>b.classList.remove("activo"));
  btn.classList.add("activo");
  seleccionActual[grupo]=valor;
}

function comprobar(){
  if(!seleccionActual.origen||!seleccionActual.tipo||!seleccionActual.intencionalidad){
    feedback.innerText="Debes elegir una opciÃ³n en cada grupo.";
    feedback.className="feedback incorrecto";
    hablar(feedback.innerText);
    return;
  }
  if(seleccionActual.origen===actual.origen &&
     seleccionActual.tipo===actual.tipo &&
     seleccionActual.intencionalidad===actual.intencionalidad){
    feedback.innerText="Â¡Muy bien! ClasificaciÃ³n correcta.";
    feedback.className="feedback correcto";
    hablar(feedback.innerText);
  }else{
    feedback.innerText="Revisa tu respuesta e intenta otra vez.";
    feedback.className="feedback incorrecto";
    hablar(feedback.innerText);
  }
}

function mostrarPista(){
  pista.innerText=actual.pista;
  pista.style.display="block";
  hablar("Pista. "+actual.pista);
}

nuevoIncidente();
</script>

</body>
</html>
